(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{"./resources/assets/js/constants/regexes.js":function(e,a,t){"use strict";t.d(a,"a",(function(){return s}));const s=/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/},"./resources/assets/js/pages/Settings/SettingsRoutes.jsx":function(e,a,t){"use strict";t.r(a),t.d(a,"SettingsRoutes",(function(){return h}));t("./node_modules/core-js/modules/es.string.match.js");var s=t("./node_modules/react/index.js"),r=t.n(s),n=t("./node_modules/react-router-dom/es/Route.js"),o=t("./resources/assets/js/components/index.js"),c=(t("./node_modules/core-js/modules/es.promise.js"),t("./node_modules/react-redux/es/index.js")),l=t("./resources/assets/js/store/actions.js"),m=t("./node_modules/axios/index.js"),i=t.n(m);const u=(e,a)=>async t=>{t({type:l.b.REQUEST,actionType:e});try{const s=await a();return t({type:l.b.SUCCESS,actionType:e}),s}catch(e){throw t({type:l.b.FAILED,error:e}),e}};var d=t("./resources/assets/js/store/action-creators/flashMessages/index.js");var p=t("./node_modules/formik/dist/formik.esm.js"),w=t("./resources/assets/js/constants/regexes.js");const b=(e={})=>{let a={};return e.first_name||(a.first_name="This field is required"),e.last_name||(a.last_name="This field is required"),e.email?w.a.test(e.email)||(a.email="Invalid email address"):a.email="This field is required",a},f=Object(c.b)(e=>{const{session:{currentUser:a}}=e;return{user:e.entities.users[a]}},null)(({user:e,onSubmit:a,className:t="",avatarUploadHandler:s})=>r.a.createElement(p.c,{validate:b,onSubmit:a,initialValues:e,validateOnChange:!1},()=>r.a.createElement(p.b,{className:t},r.a.createElement("div",{className:"flex items-center my-4"},r.a.createElement(p.a,{name:"avatar",component:o.l,uploadHandler:s,className:"mr-10"}),r.a.createElement("div",{className:"flex-grow"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-6"},r.a.createElement(p.a,{name:"email",component:o.o,labelText:"Email"}),r.a.createElement(p.a,{name:"first_name",component:o.o,labelText:"Imię"}),r.a.createElement(p.a,{name:"last_name",component:o.o,labelText:"Nazwisko"}),r.a.createElement(p.a,{name:"verification_video_url",component:o.o,labelText:"Link do Video na youtube.com"})),r.a.createElement("div",{className:"col-md-6"},r.a.createElement(p.a,{name:"company_name",component:o.o,labelText:"Nazwa Firmy"}),r.a.createElement(p.a,{name:"company_description",component:o.o,labelText:"Opis Firmy"}),r.a.createElement(p.a,{name:"company_nip",component:o.o,labelText:"NIP/REGON"}),r.a.createElement(p.a,{name:"bank_account_number",component:o.o,labelText:"Numer Konta Bankowego"}),r.a.createElement(p.a,{name:"bank_account_number",component:o.o,labelText:"Numer Konta Bankowego"}))))),r.a.createElement("div",{className:"flex border-grey-light"},r.a.createElement(o.m,{type:"submit",className:"ml-auto"},"Zapisz Dane"))))),E=(e={})=>{let a={};return["old_password","new_password","new_password_confirmation"].forEach(t=>{e[t]||(a[t]="This field is required")}),e.new_password&&e.new_password_confirmation!==e.new_password&&(a.new_password_confirmation="This password does not match the new password you entered"),a},g=({onSubmit:e})=>r.a.createElement(p.c,{validate:E,onSubmit:e,initialValues:{old_password:"",new_password:"",new_password_confirmation:""}},()=>r.a.createElement(p.b,null,r.a.createElement(p.a,{className:"mb-2",name:"old_password",component:o.j,labelText:"Stare Hasło"}),r.a.createElement("div",{className:"flex items-start mb-4"},r.a.createElement(p.a,{name:"new_password",className:"flex-grow",labelText:"Nowe Hasło",component:o.j}),r.a.createElement(p.a,{className:"flex-grow pl-4",component:o.j,name:"new_password_confirmation",labelText:"Powtórz nowe hasło"})),r.a.createElement("div",{className:"flex border-grey-light"},r.a.createElement(o.m,{type:"submit",className:"ml-auto"},"Zmień hasło"))));function _(e,a){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);a&&(s=s.filter((function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable}))),t.push.apply(t,s)}return t}function y(e){for(var a=1;a<arguments.length;a++){var t=null!=arguments[a]?arguments[a]:{};a%2?_(Object(t),!0).forEach((function(a){j(e,a,t[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):_(Object(t)).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(t,a))}))}return e}function j(e,a,t){return a in e?Object.defineProperty(e,a,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[a]=t,e}const v=Object(c.b)(e=>({currentUser:e.entities.users[e.session.currentUser]}),e=>({saveUserSettings:async(a,{setErrors:t})=>{const s=await e((e=>async a=>{const{slug:t}=e;return await a(u("save-user-settings",()=>i.a.put("/api/users/".concat(t),e)))})(a));400===s.status&&t((s.data.data,{})),e(Object(d.a)("success","Successfully saved user info",4e3)),e({type:l.d.SET_CURRENT_USER_INFO,users:s.data.data})},uploadUserAvatar:(a,t)=>e(((e,a)=>async t=>{const s=await t(u("set-user-avatar",()=>i.a.post("/api/avatars",e)));t({type:l.d.SET_AVATAR,userSlug:a,avatar:s.data.fileUrl})})(a,t)),changePassword:async(a,{setErrors:t})=>{try{await e((e=>async a=>{const{slug:t}=e;return await a(u("change-user-password",()=>i.a.put("/api/users/".concat(t,"/update-password"),e)))})(a)),e(Object(d.a)("success","Your password was successfully changed",4e3))}catch(e){422===e.response.status&&t((e.response.data.data,{})),400===e.response.status&&t({old_password:"The current password was incorrect"})}}}),(e,a,t)=>y({},e,{},a,{},t,{avatarUploadHandler:t=>a.uploadUserAvatar(t,e.currentUser.slug),handleChangePassword:t=>{const s=y({slug:e.currentUser.slug},t);return a.changePassword(s)}}))(({saveUserSettings:e,avatarUploadHandler:a,handleChangePassword:t})=>r.a.createElement(s.Fragment,null,r.a.createElement("h3",{className:"text-grey-darkest font-normal"},"Moje Dane do Weryfikacji Profilu"),r.a.createElement(f,{className:"mb-4",onSubmit:e,avatarUploadHandler:a}),r.a.createElement("h3",{className:"text-grey-darkest font-normal"},"Zmiana Hasła"),r.a.createElement(g,{onSubmit:t}))),h=({match:{url:e}})=>r.a.createElement(s.Fragment,null,r.a.createElement("div",{className:"flex items-start"},r.a.createElement(o.d,{className:"flex-grow ml-4"},r.a.createElement(o.e,null,r.a.createElement(n.a,{exact:!0,path:"".concat(e,"/user"),component:v})))));a.default=h}}]);