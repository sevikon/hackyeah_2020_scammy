(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{"./node_modules/moment/locale sync recursive ^\\.\\/.*$":function(e,t,a){var s={"./af":"./node_modules/moment/locale/af.js","./af.js":"./node_modules/moment/locale/af.js","./ar":"./node_modules/moment/locale/ar.js","./ar-dz":"./node_modules/moment/locale/ar-dz.js","./ar-dz.js":"./node_modules/moment/locale/ar-dz.js","./ar-kw":"./node_modules/moment/locale/ar-kw.js","./ar-kw.js":"./node_modules/moment/locale/ar-kw.js","./ar-ly":"./node_modules/moment/locale/ar-ly.js","./ar-ly.js":"./node_modules/moment/locale/ar-ly.js","./ar-ma":"./node_modules/moment/locale/ar-ma.js","./ar-ma.js":"./node_modules/moment/locale/ar-ma.js","./ar-sa":"./node_modules/moment/locale/ar-sa.js","./ar-sa.js":"./node_modules/moment/locale/ar-sa.js","./ar-tn":"./node_modules/moment/locale/ar-tn.js","./ar-tn.js":"./node_modules/moment/locale/ar-tn.js","./ar.js":"./node_modules/moment/locale/ar.js","./az":"./node_modules/moment/locale/az.js","./az.js":"./node_modules/moment/locale/az.js","./be":"./node_modules/moment/locale/be.js","./be.js":"./node_modules/moment/locale/be.js","./bg":"./node_modules/moment/locale/bg.js","./bg.js":"./node_modules/moment/locale/bg.js","./bm":"./node_modules/moment/locale/bm.js","./bm.js":"./node_modules/moment/locale/bm.js","./bn":"./node_modules/moment/locale/bn.js","./bn.js":"./node_modules/moment/locale/bn.js","./bo":"./node_modules/moment/locale/bo.js","./bo.js":"./node_modules/moment/locale/bo.js","./br":"./node_modules/moment/locale/br.js","./br.js":"./node_modules/moment/locale/br.js","./bs":"./node_modules/moment/locale/bs.js","./bs.js":"./node_modules/moment/locale/bs.js","./ca":"./node_modules/moment/locale/ca.js","./ca.js":"./node_modules/moment/locale/ca.js","./cs":"./node_modules/moment/locale/cs.js","./cs.js":"./node_modules/moment/locale/cs.js","./cv":"./node_modules/moment/locale/cv.js","./cv.js":"./node_modules/moment/locale/cv.js","./cy":"./node_modules/moment/locale/cy.js","./cy.js":"./node_modules/moment/locale/cy.js","./da":"./node_modules/moment/locale/da.js","./da.js":"./node_modules/moment/locale/da.js","./de":"./node_modules/moment/locale/de.js","./de-at":"./node_modules/moment/locale/de-at.js","./de-at.js":"./node_modules/moment/locale/de-at.js","./de-ch":"./node_modules/moment/locale/de-ch.js","./de-ch.js":"./node_modules/moment/locale/de-ch.js","./de.js":"./node_modules/moment/locale/de.js","./dv":"./node_modules/moment/locale/dv.js","./dv.js":"./node_modules/moment/locale/dv.js","./el":"./node_modules/moment/locale/el.js","./el.js":"./node_modules/moment/locale/el.js","./en-SG":"./node_modules/moment/locale/en-SG.js","./en-SG.js":"./node_modules/moment/locale/en-SG.js","./en-au":"./node_modules/moment/locale/en-au.js","./en-au.js":"./node_modules/moment/locale/en-au.js","./en-ca":"./node_modules/moment/locale/en-ca.js","./en-ca.js":"./node_modules/moment/locale/en-ca.js","./en-gb":"./node_modules/moment/locale/en-gb.js","./en-gb.js":"./node_modules/moment/locale/en-gb.js","./en-ie":"./node_modules/moment/locale/en-ie.js","./en-ie.js":"./node_modules/moment/locale/en-ie.js","./en-il":"./node_modules/moment/locale/en-il.js","./en-il.js":"./node_modules/moment/locale/en-il.js","./en-nz":"./node_modules/moment/locale/en-nz.js","./en-nz.js":"./node_modules/moment/locale/en-nz.js","./eo":"./node_modules/moment/locale/eo.js","./eo.js":"./node_modules/moment/locale/eo.js","./es":"./node_modules/moment/locale/es.js","./es-do":"./node_modules/moment/locale/es-do.js","./es-do.js":"./node_modules/moment/locale/es-do.js","./es-us":"./node_modules/moment/locale/es-us.js","./es-us.js":"./node_modules/moment/locale/es-us.js","./es.js":"./node_modules/moment/locale/es.js","./et":"./node_modules/moment/locale/et.js","./et.js":"./node_modules/moment/locale/et.js","./eu":"./node_modules/moment/locale/eu.js","./eu.js":"./node_modules/moment/locale/eu.js","./fa":"./node_modules/moment/locale/fa.js","./fa.js":"./node_modules/moment/locale/fa.js","./fi":"./node_modules/moment/locale/fi.js","./fi.js":"./node_modules/moment/locale/fi.js","./fo":"./node_modules/moment/locale/fo.js","./fo.js":"./node_modules/moment/locale/fo.js","./fr":"./node_modules/moment/locale/fr.js","./fr-ca":"./node_modules/moment/locale/fr-ca.js","./fr-ca.js":"./node_modules/moment/locale/fr-ca.js","./fr-ch":"./node_modules/moment/locale/fr-ch.js","./fr-ch.js":"./node_modules/moment/locale/fr-ch.js","./fr.js":"./node_modules/moment/locale/fr.js","./fy":"./node_modules/moment/locale/fy.js","./fy.js":"./node_modules/moment/locale/fy.js","./ga":"./node_modules/moment/locale/ga.js","./ga.js":"./node_modules/moment/locale/ga.js","./gd":"./node_modules/moment/locale/gd.js","./gd.js":"./node_modules/moment/locale/gd.js","./gl":"./node_modules/moment/locale/gl.js","./gl.js":"./node_modules/moment/locale/gl.js","./gom-latn":"./node_modules/moment/locale/gom-latn.js","./gom-latn.js":"./node_modules/moment/locale/gom-latn.js","./gu":"./node_modules/moment/locale/gu.js","./gu.js":"./node_modules/moment/locale/gu.js","./he":"./node_modules/moment/locale/he.js","./he.js":"./node_modules/moment/locale/he.js","./hi":"./node_modules/moment/locale/hi.js","./hi.js":"./node_modules/moment/locale/hi.js","./hr":"./node_modules/moment/locale/hr.js","./hr.js":"./node_modules/moment/locale/hr.js","./hu":"./node_modules/moment/locale/hu.js","./hu.js":"./node_modules/moment/locale/hu.js","./hy-am":"./node_modules/moment/locale/hy-am.js","./hy-am.js":"./node_modules/moment/locale/hy-am.js","./id":"./node_modules/moment/locale/id.js","./id.js":"./node_modules/moment/locale/id.js","./is":"./node_modules/moment/locale/is.js","./is.js":"./node_modules/moment/locale/is.js","./it":"./node_modules/moment/locale/it.js","./it-ch":"./node_modules/moment/locale/it-ch.js","./it-ch.js":"./node_modules/moment/locale/it-ch.js","./it.js":"./node_modules/moment/locale/it.js","./ja":"./node_modules/moment/locale/ja.js","./ja.js":"./node_modules/moment/locale/ja.js","./jv":"./node_modules/moment/locale/jv.js","./jv.js":"./node_modules/moment/locale/jv.js","./ka":"./node_modules/moment/locale/ka.js","./ka.js":"./node_modules/moment/locale/ka.js","./kk":"./node_modules/moment/locale/kk.js","./kk.js":"./node_modules/moment/locale/kk.js","./km":"./node_modules/moment/locale/km.js","./km.js":"./node_modules/moment/locale/km.js","./kn":"./node_modules/moment/locale/kn.js","./kn.js":"./node_modules/moment/locale/kn.js","./ko":"./node_modules/moment/locale/ko.js","./ko.js":"./node_modules/moment/locale/ko.js","./ku":"./node_modules/moment/locale/ku.js","./ku.js":"./node_modules/moment/locale/ku.js","./ky":"./node_modules/moment/locale/ky.js","./ky.js":"./node_modules/moment/locale/ky.js","./lb":"./node_modules/moment/locale/lb.js","./lb.js":"./node_modules/moment/locale/lb.js","./lo":"./node_modules/moment/locale/lo.js","./lo.js":"./node_modules/moment/locale/lo.js","./lt":"./node_modules/moment/locale/lt.js","./lt.js":"./node_modules/moment/locale/lt.js","./lv":"./node_modules/moment/locale/lv.js","./lv.js":"./node_modules/moment/locale/lv.js","./me":"./node_modules/moment/locale/me.js","./me.js":"./node_modules/moment/locale/me.js","./mi":"./node_modules/moment/locale/mi.js","./mi.js":"./node_modules/moment/locale/mi.js","./mk":"./node_modules/moment/locale/mk.js","./mk.js":"./node_modules/moment/locale/mk.js","./ml":"./node_modules/moment/locale/ml.js","./ml.js":"./node_modules/moment/locale/ml.js","./mn":"./node_modules/moment/locale/mn.js","./mn.js":"./node_modules/moment/locale/mn.js","./mr":"./node_modules/moment/locale/mr.js","./mr.js":"./node_modules/moment/locale/mr.js","./ms":"./node_modules/moment/locale/ms.js","./ms-my":"./node_modules/moment/locale/ms-my.js","./ms-my.js":"./node_modules/moment/locale/ms-my.js","./ms.js":"./node_modules/moment/locale/ms.js","./mt":"./node_modules/moment/locale/mt.js","./mt.js":"./node_modules/moment/locale/mt.js","./my":"./node_modules/moment/locale/my.js","./my.js":"./node_modules/moment/locale/my.js","./nb":"./node_modules/moment/locale/nb.js","./nb.js":"./node_modules/moment/locale/nb.js","./ne":"./node_modules/moment/locale/ne.js","./ne.js":"./node_modules/moment/locale/ne.js","./nl":"./node_modules/moment/locale/nl.js","./nl-be":"./node_modules/moment/locale/nl-be.js","./nl-be.js":"./node_modules/moment/locale/nl-be.js","./nl.js":"./node_modules/moment/locale/nl.js","./nn":"./node_modules/moment/locale/nn.js","./nn.js":"./node_modules/moment/locale/nn.js","./pa-in":"./node_modules/moment/locale/pa-in.js","./pa-in.js":"./node_modules/moment/locale/pa-in.js","./pl":"./node_modules/moment/locale/pl.js","./pl.js":"./node_modules/moment/locale/pl.js","./pt":"./node_modules/moment/locale/pt.js","./pt-br":"./node_modules/moment/locale/pt-br.js","./pt-br.js":"./node_modules/moment/locale/pt-br.js","./pt.js":"./node_modules/moment/locale/pt.js","./ro":"./node_modules/moment/locale/ro.js","./ro.js":"./node_modules/moment/locale/ro.js","./ru":"./node_modules/moment/locale/ru.js","./ru.js":"./node_modules/moment/locale/ru.js","./sd":"./node_modules/moment/locale/sd.js","./sd.js":"./node_modules/moment/locale/sd.js","./se":"./node_modules/moment/locale/se.js","./se.js":"./node_modules/moment/locale/se.js","./si":"./node_modules/moment/locale/si.js","./si.js":"./node_modules/moment/locale/si.js","./sk":"./node_modules/moment/locale/sk.js","./sk.js":"./node_modules/moment/locale/sk.js","./sl":"./node_modules/moment/locale/sl.js","./sl.js":"./node_modules/moment/locale/sl.js","./sq":"./node_modules/moment/locale/sq.js","./sq.js":"./node_modules/moment/locale/sq.js","./sr":"./node_modules/moment/locale/sr.js","./sr-cyrl":"./node_modules/moment/locale/sr-cyrl.js","./sr-cyrl.js":"./node_modules/moment/locale/sr-cyrl.js","./sr.js":"./node_modules/moment/locale/sr.js","./ss":"./node_modules/moment/locale/ss.js","./ss.js":"./node_modules/moment/locale/ss.js","./sv":"./node_modules/moment/locale/sv.js","./sv.js":"./node_modules/moment/locale/sv.js","./sw":"./node_modules/moment/locale/sw.js","./sw.js":"./node_modules/moment/locale/sw.js","./ta":"./node_modules/moment/locale/ta.js","./ta.js":"./node_modules/moment/locale/ta.js","./te":"./node_modules/moment/locale/te.js","./te.js":"./node_modules/moment/locale/te.js","./tet":"./node_modules/moment/locale/tet.js","./tet.js":"./node_modules/moment/locale/tet.js","./tg":"./node_modules/moment/locale/tg.js","./tg.js":"./node_modules/moment/locale/tg.js","./th":"./node_modules/moment/locale/th.js","./th.js":"./node_modules/moment/locale/th.js","./tl-ph":"./node_modules/moment/locale/tl-ph.js","./tl-ph.js":"./node_modules/moment/locale/tl-ph.js","./tlh":"./node_modules/moment/locale/tlh.js","./tlh.js":"./node_modules/moment/locale/tlh.js","./tr":"./node_modules/moment/locale/tr.js","./tr.js":"./node_modules/moment/locale/tr.js","./tzl":"./node_modules/moment/locale/tzl.js","./tzl.js":"./node_modules/moment/locale/tzl.js","./tzm":"./node_modules/moment/locale/tzm.js","./tzm-latn":"./node_modules/moment/locale/tzm-latn.js","./tzm-latn.js":"./node_modules/moment/locale/tzm-latn.js","./tzm.js":"./node_modules/moment/locale/tzm.js","./ug-cn":"./node_modules/moment/locale/ug-cn.js","./ug-cn.js":"./node_modules/moment/locale/ug-cn.js","./uk":"./node_modules/moment/locale/uk.js","./uk.js":"./node_modules/moment/locale/uk.js","./ur":"./node_modules/moment/locale/ur.js","./ur.js":"./node_modules/moment/locale/ur.js","./uz":"./node_modules/moment/locale/uz.js","./uz-latn":"./node_modules/moment/locale/uz-latn.js","./uz-latn.js":"./node_modules/moment/locale/uz-latn.js","./uz.js":"./node_modules/moment/locale/uz.js","./vi":"./node_modules/moment/locale/vi.js","./vi.js":"./node_modules/moment/locale/vi.js","./x-pseudo":"./node_modules/moment/locale/x-pseudo.js","./x-pseudo.js":"./node_modules/moment/locale/x-pseudo.js","./yo":"./node_modules/moment/locale/yo.js","./yo.js":"./node_modules/moment/locale/yo.js","./zh-cn":"./node_modules/moment/locale/zh-cn.js","./zh-cn.js":"./node_modules/moment/locale/zh-cn.js","./zh-hk":"./node_modules/moment/locale/zh-hk.js","./zh-hk.js":"./node_modules/moment/locale/zh-hk.js","./zh-tw":"./node_modules/moment/locale/zh-tw.js","./zh-tw.js":"./node_modules/moment/locale/zh-tw.js"};function o(e){var t=l(e);return a(t)}function l(e){if(!a.o(s,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return s[e]}o.keys=function(){return Object.keys(s)},o.resolve=l,e.exports=o,o.id="./node_modules/moment/locale sync recursive ^\\.\\/.*$"},"./resources/assets/js/components/VouchersTable/VoucherTable.scss":function(e,t,a){e.exports={voucherStatus:"voucherStatus_2htn2",voucherTableActions:"voucherTableActions_4gzep"}},"./resources/assets/js/pages/Overview/Overview.jsx":function(e,t,a){"use strict";a.r(t);var s=a("./node_modules/react-helmet/lib/Helmet.js"),o=a.n(s),l=a("./node_modules/react/index.js"),n=a.n(l),m=a("./node_modules/react-redux/es/index.js"),r=a("./resources/assets/js/store/selectors/session/index.js"),c=a("./node_modules/immutable/dist/immutable.js"),d=a("./node_modules/axios/index.js"),i=a.n(d);a("./node_modules/core-js/modules/es.string.replace.js");var u=a("./node_modules/lodash/forOwn.js"),h=a.n(u),p=a("./node_modules/lodash/snakeCase.js"),j=a.n(p),_=a("./node_modules/lodash/head.js"),b=a.n(_),g=a("./node_modules/lodash/camelCase.js"),v=a.n(g);class f{static fetch(e){return e&&Array.isArray(e)?f.fetchCollection(e):e&&"object"==typeof e?f.fetchObject(e):e}static fetchCollection(e){return e.map(e=>f.fetch(e))}static fetchObject(e){return this.objectToCamelCase(e)}static objectToCamelCase(e){const t={};return h()(e,(e,a)=>{t[v()(a)]=f.fetch(e)}),t}static objectToSnakeCase(e){const t={};return h()(e,(e,a)=>{t[j()(a)]=f.fetch(e)}),t}static capitalizeFirstLetter(e){return e.charAt(0).toUpperCase()+e.slice(1)}static send(e){return e&&Array.isArray(e)?f.sendCollection(e):e&&"object"==typeof e?f.sendObject(e):e}static sendCollection(e){return e.map(e=>f.send(e))}static sendObject(e){const t={};return h()(e,(e,a)=>{t[j()(a)]=f.send(e)}),t}static resetValidationFields({errors:e,replace:t=!1,searchStr:a="",replaceStr:s=""}){const o={};return h()(e,(e,l)=>{let n;n=t?v()(l.replace(a,s)):v()(l),o[n]=b()(e)}),o}}var y=a("./resources/assets/js/components/VouchersTable/VoucherTable.scss"),E=a.n(y),k=a("./node_modules/prop-types/index.js"),C=a.n(k),N=(a("./node_modules/core-js/modules/es.object.assign.js"),a("./node_modules/material-table/dist/index.js")),O=a.n(N),w=a("./node_modules/@material-ui/core/TablePagination/TablePagination.js"),S=a.n(w),M=a("./node_modules/material-table/dist/components/m-table-toolbar.js"),T=a.n(M),x=a("./node_modules/lodash/debounce.js"),z=a.n(x),D=(a("./node_modules/core-js/modules/es.number.to-fixed.js"),a("./node_modules/core-js/modules/es.regexp.to-string.js"),a("./node_modules/core-js/modules/es.string.match.js"),a("./node_modules/moment/moment.js")),F=a.n(D);const L=0,R=1,A=2,V=3,P={[R]:"Zapłacony",[L]:"Oczekujący",[A]:"Zwrócony",[V]:"Wykorzystany"},Y=[{name:"Obecny Miesiąc",value:"CURRENT_MONTH"},{name:"Ostatni Tydzień",value:"LAST_WEEK"},{name:"Ten tydzień",value:"CURRENT_WEEK"}],U=[{value:L,name:P[L]},{value:R,name:P[R]},{value:A,name:P[A]},{value:V,name:P[V]}],I=e=>{return""!==(t=e)&&null!=t?e:"";var t},q=e=>{let t=Object(c.Map)();return Object(c.Map)(e).get("items").map(e=>t=t.set(e.field,[e.msg])),t},B=e=>null==e?"":("string"==typeof e||e instanceof String||(e=e.toString()),e);class Z extends l.Component{constructor(e){super(e),this.state={value:""},this.handleInputChange=this.handleInputChange.bind(this),this.handleReactiveChange=z()(this.handleReactiveChange.bind(this),400)}componentDidMount(){this.setState({value:I(this.props.value)})}componentDidUpdate(e){this.props.value===e.value||this.props.reactive||this.setState({value:I(this.props.value)})}handleReactiveChange(){const{value:e}=this.state,{name:t,onChange:a}=this.props;a&&a({name:t,value:e})}handleInputChange(e){e=I(e),this.setState({value:e},()=>{const{reactive:e}=this.props;e&&this.handleReactiveChange()})}render(){const{autocomplete:e=null,children:t,className:a="",disabled:s=!1,errors:o=Object(c.Map)(),label:l,name:m,onChange:r,placeholder:d,type:i="text"}=this.props;return n.a.createElement("div",{className:"form-group m-form__group ".concat(a)},l&&n.a.createElement("label",null,l),n.a.createElement("div",{className:"input-wrapper"},"checkbox"!==i&&n.a.createElement("input",{type:i,disabled:s,autoComplete:e,placeholder:d,value:this.state.value,name:m,className:"form-control m-input".concat(o.has(m)&&" is-invalid"),onChange:e=>this.handleInputChange(e.target.value),onBlur:e=>r({name:m,value:e.target.value})}),"checkbox"===i&&n.a.createElement("label",{className:"m-checkbox m-checkbox--focus"},n.a.createElement("input",{type:"checkbox",value:this.state.value,checked:!0===this.state.value,disabled:s,name:m,onChange:e=>r({name:m,value:!("false"!==e.target.value&&e.target.value)})}),d,n.a.createElement("span",null)),o.has(m)&&n.a.createElement("div",{className:"invalid-feedback"},o.get(m)[0]),t))}}Z.propTypes={autocomplete:C.a.string,children:C.a.oneOfType([C.a.object,C.a.array]),className:C.a.string,disabled:C.a.bool,errors:C.a.instanceOf(c.Map),label:C.a.string,name:C.a.string.isRequired,onChange:C.a.func,placeholder:C.a.string,reactive:C.a.bool,type:C.a.string,value:C.a.oneOfType([C.a.string,C.a.number,C.a.bool])};var H=Z;const K=({autocomplete:e,errors:t=Object(c.Map)(),label:a,name:s,onChange:o,placeholder:l,value:m})=>n.a.createElement(H,{value:m,name:s,placeholder:l,type:"checkbox",autocomplete:e,errors:t,onChange:e=>o({target:e}),label:a});K.propTypes={autocomplete:C.a.bool,errors:C.a.instanceOf(c.Map),label:C.a.string,name:C.a.string,onChange:C.a.func.isRequired,placeholder:C.a.string,value:C.a.bool};var W=K;function G(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,s)}return a}function $(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?G(Object(a),!0).forEach((function(t){J(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):G(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function J(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function Q(){return(Q=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e}).apply(this,arguments)}class X extends l.Component{render(){const{columns:e,data:t,title:a="",options:s={columnsButton:!0,exportButton:!0,filtering:!0,pageSize:10,selection:!1,pageSizeOptions:[10,25,50,100],exportDelimiter:","}}=this.props,{additionalOptions:o={},count:l,onChangeColumnHidden:m,onChangePage:r,onChangeRowsPerPage:c,onOrderChange:d,page:i,searchDisabled:u=!1,toolBarActions:h=null}=this.props,{selectedAll:p=!1,selectAll:j}=o;let _={};return r&&(_.onChangePage=r),n.a.createElement(O.a,{onChangeColumnHidden:m,onOrderChange:d,onChangeRowsPerPage:c,columns:e,isRemoteData:()=>!0,search:!1,components:{Pagination:e=>{const t=void 0!==l?l:e.count,a=void 0!==i?i:e.page;return n.a.createElement("td",{className:"footer-table-wrapper"},n.a.createElement("table",{className:"footer-table"},n.a.createElement("tbody",null,n.a.createElement("tr",null,n.a.createElement("td",null,n.a.createElement("p",null,"Found total: ",t," records")),n.a.createElement(S.a,Q({},e,_,{page:a,count:t}))))))},Toolbar:e=>n.a.createElement("div",{className:"toolbar-wrapper"},n.a.createElement(T.a,Q({},e,{search:!u})),h,t.length>0&&j&&n.a.createElement("div",{className:"select-all"},n.a.createElement(W,{value:!!p,onChange:()=>j(t),name:"selected"})))},data:t,title:a,options:$({},s,{},o)})}}X.propTypes={additionalOptions:C.a.object,columns:C.a.array,count:C.a.number,data:C.a.array,onChangeColumnHidden:C.a.func,onChangePage:C.a.func,onChangeRowsPerPage:C.a.func,onOrderChange:C.a.func,page:C.a.number,options:C.a.object,searchDisabled:C.a.bool,title:C.a.oneOfType([C.a.string,C.a.node]),toolBarActions:C.a.object};var ee=X;class te extends l.Component{render(){const{actions:e,children:t,className:a,loading:s=!1,subtitle:o,title:l,header:m=!0,grayBackGroundColor:r}=this.props;return n.a.createElement("div",{style:r?{backgroundColor:"#f2f3f8"}:null,className:"kt-portlet kt-portlet--mobile kt-portlet--body-progress- ".concat(a," ").concat(m?"":"drag-element")},m&&n.a.createElement("div",{className:"kt-portlet__head drag-element",style:r?{backgroundColor:"#fff"}:null},n.a.createElement("div",{className:"kt-portlet__head-label"},n.a.createElement("div",{className:"kt-portlet__head-title"},l,o&&n.a.createElement("small",null,o))),n.a.createElement("div",{className:"kt-portlet__head-toolbar"},e&&e)),n.a.createElement("div",{className:"kt-portlet__body"},s&&n.a.createElement("div",{className:"kt-portlet__body-progress"},"Loading"),t))}}te.propTypes={actions:C.a.oneOfType([C.a.array,C.a.object]),children:C.a.oneOfType([C.a.array,C.a.object]),className:C.a.string,dispatch:C.a.func,header:C.a.bool,hiddenWidgets:C.a.array,layouts:C.a.object,subtitle:C.a.string,title:C.a.oneOfType([C.a.string,C.a.object]),widgetId:C.a.string};var ae=Object(m.b)(()=>({}))(te),se=a("./node_modules/@material-ui/core/esm/styles/withStyles.js"),oe=a("./node_modules/@material-ui/core/esm/Typography/Typography.js"),le=a("./node_modules/@material-ui/core/esm/Modal/Modal.js");class ne extends n.a.Component{render(){const{classes:e,className:t,content:a,handleClose:s,open:o,title:l,topButtons:m}=this.props;return n.a.createElement(le.a,{"aria-labelledby":"simple-modal-title","aria-describedby":"simple-modal-description",open:o||!1,onClose:s,className:"simple-modal-wrapper ".concat(t)},n.a.createElement("div",{style:{top:"".concat(50,"%"),left:"".concat(50,"%")},className:"".concat(e.paper," modal-body")},n.a.createElement("div",{className:"modal-wrapper"},n.a.createElement("div",{className:"modal-header"},n.a.createElement(oe.a,{variant:"h6",className:"modal-title"},l),m&&m,n.a.createElement("button",{className:"close","aria-label":"Close",onClick:s},n.a.createElement("span",null,"×"))),n.a.createElement(oe.a,{variant:"subtitle1",className:"modal-description"},a),n.a.createElement(me,null))))}}ne.propTypes={classes:C.a.object,className:C.a.string,content:C.a.object,handleClose:C.a.func,open:C.a.bool,title:C.a.string,topButtons:C.a.object};const me=Object(se.a)(e=>({paper:{position:"absolute",width:50*e.spacing.unit,minHeight:50*e.spacing.unit,backgroundColor:e.palette.background.paper,boxShadow:e.shadows[5],marginLeft:50*-e.spacing.unit/2,marginTop:50*-e.spacing.unit/2}}))(ne);var re=me,ce=(a("./node_modules/core-js/modules/es.promise.js"),a("./node_modules/ree-validate/dist/ree-validate.esm.js")),de=(a("./node_modules/core-js/modules/es.string.includes.js"),a("./node_modules/react-select/dist/react-select.esm.js")),ie=a("./node_modules/react-select/lib/Async.js"),ue=a.n(ie);const he=(e,t=null,a=!0)=>{const s=e.data;return a&&("string"==typeof s||s instanceof String)?{error:null,status:"error",statusCode:404,params:t}:{status:"success",data:f.fetch(e.data),params:t}},pe=(e,t=null)=>{const a=e.response?e.response.status:500,s={error:null,status:"error",statusCode:a,params:t};return 422===a?s.errors=e.response.data.errors:403===a?console.error("Privileges Error"):401===a?(console.error("Please login again"),s.error=e.response.data.message):400===a&&(s.error=e.response.data.message,s.errors=e.response.data.errors,console.error(s.error)),console.log(e),s};const je=(e,t,a,s=(()=>{}),o={})=>t.then(t=>(e(a(he(t,o))),s(he(t,o)))).catch(t=>(console.log(t),e(a(pe(t,o))),s(pe(t,o))));class _e extends l.Component{constructor(e){var t,a,s;super(e),s=(e,t)=>{const a=e?t.filter(t=>t.label.toLowerCase().includes(e.toLowerCase())):t;return this.setState({asyncOptions:Object(c.List)(a)}),a},(a="filterOptions")in(t=this)?Object.defineProperty(t,a,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[a]=s,this.promiseOptions=this.promiseOptions.bind(this),this.filterOptions=this.filterOptions.bind(this),this.state={asyncOptions:Object(c.List)()}}promiseOptions(e){const{requestUrl:t="",requestType:a="post"}=this.props;return je(()=>{},function(e,t,a){let s;switch(t){case"put":s=i.a.put(e,a);break;case"post":s=i.a.post(e,a);break;case"delete":s=i.a.delete(e,a);break;default:s=i.a.get(e,{params:a})}return s}(t,a,{term:e,value:this.props.value}),()=>{},t=>{if("success"===t.status)return this.filterOptions(e,t.data.opportunities.map(e=>({label:e.url,value:e.id})))})}render(){const{async:e=!1,full:t=!1,isClearable:a=!0,isMulti:s=!1,options:o=Object(c.List)(),errors:l=Object(c.Map)(),label:m,name:r,onChange:d,placeholder:i,value:u}=this.props,h=s?o.filter(e=>u&&u.indexOf(e.value)>=0).toArray():o.find(e=>e.value===u);return n.a.createElement("div",{className:"form-group m-form__group select-wrapper ".concat(l&&l.has(r)&&" is-invalid"," ").concat(s&&u&&u[0]?" multiple-wrapper":"")},m&&n.a.createElement("label",null,m),!e&&n.a.createElement(de.a,{placeholder:i,isMulti:s,full:t,loadOptions:e?this.promiseOptions:null,isClearable:a,options:o.toArray(),value:h||null,onChange:e=>{d({name:r,value:e?s?e.map(e=>e.value):e.value:""})},className:"m-input"}),e&&n.a.createElement(ue.a,{placeholder:i,isMulti:s,defaultOptions:!0,loadOptions:e?this.promiseOptions:null,isClearable:a,value:this.state.asyncOptions.find(e=>e.value===u),onChange:e=>{d({name:r,value:e?s?e.map(e=>e.value):e.value:""})},className:"m-input"}),l&&l.has(r)&&n.a.createElement("div",{className:"invalid-feedback"},l.get(r)[0]))}}_e.propTypes={async:C.a.bool,errors:C.a.instanceOf(c.Map),full:C.a.bool,isClearable:C.a.bool,isMulti:C.a.bool,label:C.a.string,name:C.a.string.isRequired,onChange:C.a.func,options:C.a.instanceOf(c.List),placeholder:C.a.string,requestUrl:C.a.string,requestType:C.a.string,value:C.a.oneOfType([C.a.number,C.a.string,C.a.array,C.a.instanceOf(c.List)])};var be=_e;class ge extends l.Component{render(){const{isMulti:e=!1,errors:t,label:a,name:s,onChange:o,placeholder:l="Status Vouchera",value:m}=this.props,r=Object(c.List)(U).map(e=>({value:e.value,label:e.name}));return n.a.createElement(be,{errors:t,name:s,options:r,onChange:o,value:m?parseInt(m):m,isClearable:!1,isMulti:e,placeholder:l,label:a})}}ge.propTypes={errors:C.a.instanceOf(c.Map),isMulti:C.a.bool,label:C.a.string,name:C.a.string.isRequired,onChange:C.a.func,placeholder:C.a.string,labels:C.a.instanceOf(c.List),value:C.a.oneOfType([C.a.number,C.a.array,C.a.instanceOf(c.List)])};var ve=ge;class fe extends l.Component{constructor(e){super(e),this.state={value:""},this.handleInputChange=this.handleInputChange.bind(this),this.handleReactiveChange=z()(this.handleReactiveChange.bind(this),400)}componentDidMount(){this.setState({value:I(this.props.value)})}componentDidUpdate(e){this.props.value===e.value||this.props.reactive||this.setState({value:I(this.props.value)})}handleReactiveChange(){const{value:e}=this.state,{name:t,onChange:a}=this.props;a&&a({name:t,value:e})}handleInputChange(e){e=I(e),this.setState({value:e},()=>{const{reactive:e}=this.props;e&&this.handleReactiveChange()})}render(){const{autocomplete:e=null,children:t,className:a="",disabled:s=!1,errors:o=Object(c.Map)(),label:l,name:m,onChange:r,placeholder:d,type:i="text"}=this.props;return n.a.createElement("div",{className:"form-group m-form__group ".concat(a)},l&&n.a.createElement("label",null,l),n.a.createElement("div",{className:"input-wrapper"},"checkbox"!==i&&n.a.createElement("input",{type:i,disabled:s,autoComplete:e,placeholder:d,value:this.state.value,name:m,className:"form-control m-input".concat(o.has(m)&&" is-invalid"),onChange:e=>this.handleInputChange(e.target.value),onBlur:e=>r({name:m,value:e.target.value})}),"checkbox"===i&&n.a.createElement("label",{className:"m-checkbox m-checkbox--focus"},n.a.createElement("input",{type:"checkbox",value:this.state.value,checked:!0===this.state.value,disabled:s,name:m,onChange:e=>r({name:m,value:!("false"!==e.target.value&&e.target.value)})}),d,n.a.createElement("span",null)),o.has(m)&&n.a.createElement("div",{className:"invalid-feedback"},o.get(m)[0]),t))}}fe.propTypes={autocomplete:C.a.string,children:C.a.oneOfType([C.a.object,C.a.array]),className:C.a.string,disabled:C.a.bool,errors:C.a.instanceOf(c.Map),label:C.a.string,name:C.a.string.isRequired,onChange:C.a.func,placeholder:C.a.string,reactive:C.a.bool,type:C.a.string,value:C.a.oneOfType([C.a.string,C.a.number,C.a.bool])};var ye=fe;class Ee extends l.Component{constructor(e){super(e),this.state={value:""},this.handleTextareaChange=this.handleTextareaChange.bind(this)}componentDidMount(){this.setState({value:I(this.props.value)})}componentDidUpdate(e){this.props.value!==e.value&&this.setState({value:I(this.props.value)})}handleTextareaChange(e){this.setState({value:e})}render(){const{children:e,className:t="",disabled:a=!1,errors:s,label:o,name:l,onChange:m,placeholder:r,rows:c=5}=this.props;return n.a.createElement("div",{className:"form-group m-form__group ".concat(t)},o&&n.a.createElement("label",null,o),n.a.createElement("div",{className:"input-wrapper"},n.a.createElement("textarea",{placeholder:r,disabled:a,rows:c,value:this.state.value,className:"form-control m-input".concat(s.has(l)&&" is-invalid"),onChange:e=>this.handleTextareaChange(e.target.value),onBlur:e=>m({name:l,value:e.target.value})}),s.has(l)&&n.a.createElement("div",{className:"invalid-feedback"},s.get(l)[0]),e))}}Ee.propTypes={children:C.a.oneOfType([C.a.object,C.a.array]),className:C.a.string,disabled:C.a.bool,errors:C.a.instanceOf(c.Map).isRequired,label:C.a.string,name:C.a.string.isRequired,onChange:C.a.func,placeholder:C.a.string,rows:C.a.number,value:C.a.oneOfType([C.a.string,C.a.number])};var ke=Ee;ce.a.extend("money",{getMessage:e=>"The "+e+" value should be a valid number",validate:e=>new Promise(t=>(e=((e,t=2,a=!1)=>((e=B(e))<0&&a?"-":"")+parseFloat(e.replace(/[^0-9.]/gi,"")).toFixed(t))(e),isNaN(e)&&t(!1),t(!!(e=(e=>(e=B(e)).replace(/\B(?=(\d{3})+(?!\d))/g,","))(e))&&/^[0-9.,]*$/.test(e))))}),ce.a.extend("valid_url",{getMessage:e=>"The "+e+" value should be a valid URL",validate:e=>new Promise(t=>{return t(null!=((a=e)?a.match(/(http(s)?:\/\/.)?(www\.)?[-a-zA-Z0-9@:%._+~#=]{2,256}\.[a-z]{2,6}\b([-a-zA-Z0-9@:%_+.~#?&/=]*)/g):null)||"http://localhost:3000"===a||"http://localhost:8000"===a);var a})});class Ce extends l.Component{constructor(e){super(e),this.handleFormChange=this.handleFormChange.bind(this),this.handleFileChange=this.handleFileChange.bind(this),this.handleDeleteFile=this.handleDeleteFile.bind(this),this.handleChangeFileInputFile=this.handleChangeFileInputFile.bind(this),this.submit=this.submit.bind(this),this.getField=this.getField.bind(this),this.state={errors:Object(c.Map)(),files:Object(c.List)()}}componentDidMount(){this.validator=new ce.a(this.props.rules),this.setState({error:this.validator.errors})}componentDidUpdate(e){this.props.rules!==e.rules&&(this.validator=new ce.a(this.props.rules),this.setState({error:this.validator.errors})),this.props.forceValidateId&&this.props.forceValidateId!==e.forceValidateId&&this.submit(null,{updateErrors:!0}),this.props.errors!==e.errors&&this.setState({errors:this.props.errors});const{form:t}=this.props;if(t&&t!==e.form){const s=t.toObject(),o=e.form.toObject();for(var a in s)s.hasOwnProperty(a)&&this.props.rules[a]&&s[a]!==o[a]&&this.validator.validate(a,s[a]).then(()=>{this.setState({errors:q(this.validator.errors)})})}}handleFormChange({target:e}){const t=e.name,a=e.value,{errors:s}=this.validator;s.remove(t),this.validator.validate(t,a).then(()=>{this.setState({errors:q(s)},()=>{this.props.handleChange(e)})})}handleFileChange({target:e}){const t=e.name,a=e.value;let s=this.state.files;a&&(s=s.filter(e=>e.name!==t).push({name:t,value:a})),this.setState({files:s},()=>{this.props.handleFileChange&&this.props.handleFileChange({files:s})})}handleDeleteFile(e){const t=e.name;let a=this.state.files;a=a.filter(e=>e.name!==t),this.setState({files:a},()=>{this.props.handleFileChange&&this.props.handleFileChange({files:a})})}handleChangeFileInputFile({name:e,files:t}){t.length>0&&this.handleFileChange({target:{name:e,value:t[0]}})}submit(e,t={}){e&&e.preventDefault();const{updateErrors:a=!1}=t,{errors:s}=this.validator;let o=0,l=this.props.form;const n=this.state.files.toArray(),m=(e,t,a={})=>{let s,m;o++,a.name?(m=a.name,s=a.value):(m=e.name,s=t.thumb_240),l=l.set(m,s),this.props.handleChange({name:m,value:s}),o>=n.length&&this.setState({files:Object(c.List)()},()=>{r()})},r=()=>{this.props.handleSubmit&&this.props.handleSubmit(l),a&&this.props.updateErrors&&this.props.updateErrors(this.state.errors)},d=e=>{const{handleFileUpload:t}=this.props;t&&t(e,(t,a)=>m(e,t,a)),!t&&r()};this.validator.validateAll(l.toObject()).then(e=>{if(e)if(n.length>0)for(let e=0;e<n.length;e++)d(n[e]);else r();else this.setState({errors:q(s)},()=>{a&&this.props.updateErrors&&this.props.updateErrors(this.state.errors)})})}getField(e,t){const{form:a}=this.props;let{errors:s}=this.state;return"input"===e.kind?n.a.createElement(ye,{value:a.get(e.name),disabled:e.disabled,name:e.name,key:t,placeholder:e.placeholder,type:e.type,autocomplete:e.autocomplete,errors:s,onChange:e=>this.handleFormChange({target:e}),label:e.label}):"textarea"===e.kind?n.a.createElement(ke,{value:a.get(e.name),disabled:e.disabled,name:e.name,key:t,placeholder:e.placeholder,rows:e.rows,errors:s,onChange:e=>this.handleFormChange({target:e}),label:e.label}):"select_voucher_status"===e.kind?n.a.createElement(ve,{errors:s,onChange:e=>this.handleFormChange({target:e}),isClearable:e.isClearable,key:t,placeholder:e.placeholder,label:e.label,value:a.get(e.name),name:e.name}):"text"===e.kind?n.a.createElement("div",{className:"form-group m-form__group text-field",key:t},e.label&&n.a.createElement("label",null,e.label),n.a.createElement("div",{className:"input-wrapper"},"url"===e.type&&n.a.createElement("a",{href:a.get(e.name),target:"_blank",rel:"noreferrer noopener"},a.get(e.name)),"text"===e.type&&a.get(e.name),e.customField&&e.customField(a,s))):null}render(){const{actionsClassName:e,additionalButtons:t=null,className:a="",fields:s,handleSubmit:o,uniqueKey:l="form",loading:m,sections:r=[],submitTitle:c="Zapisz"}=this.props;return n.a.createElement("form",{className:"m-form m-form--fit m-form--label-align-right ".concat(a),onSubmit:this.submit},r.length>0&&r.map(e=>n.a.createElement("div",{className:"form-section ".concat(e.className),key:"".concat(l,"-section-").concat(e.id)},s.filter(t=>t.section===e.id).map((e,t)=>this.getField(e,"".concat(l,"-").concat(t))))),0===r.length&&s.map((e,t)=>this.getField(e,"".concat(l,"-field-").concat(t))),(o||t)&&n.a.createElement("div",{className:"m-form__actions".concat(e?" "+e:"")},t&&t,m&&n.a.createElement(SimpleLoading,null),!m&&o&&n.a.createElement("button",{className:"btn btn-primary btn-sm m-btn m-btn--custom",onClick:this.submit},c)))}}Ce.propTypes={actionsClassName:C.a.string,additionalButtons:C.a.object,campaigns:C.a.instanceOf(c.List),className:C.a.string,clients:C.a.instanceOf(c.List),errors:C.a.object,fields:C.a.array,forceValidateId:C.a.number,form:C.a.object,handleChange:C.a.func,handleFileChange:C.a.func,handleFileUpload:C.a.func,handleSubmit:C.a.func,lists:C.a.instanceOf(c.List),loading:C.a.bool,projects:C.a.instanceOf(c.List),rules:C.a.object,sections:C.a.array,submitTitle:C.a.string,uniqueKey:C.a.string,updateErrors:C.a.func};var Ne=Ce;class Oe extends l.Component{render(){const{form:e,handleClose:t,handleSubmit:a,handleFormChange:s}=this.props,o=n.a.createElement("div",{className:"opportunity-entry-form"},n.a.createElement(Ne,{loading:!1,rules:{voucher_status:""},form:e,fields:[{kind:"select_voucher_status",name:"voucher_status",label:"Status Vouchera",placeholder:"Status Vouchera"}],handleFileChange:this.handleFileChange,handleChange:s,handleSubmit:a})),{visible:l}=this.props;return n.a.createElement(re,{title:"Zmień Status Vouchera",handleClose:t,open:l,content:o,className:"big-modal"})}}Oe.propTypes={handleClose:C.a.func,handleFormChange:C.a.func,handleSubmit:C.a.func,form:C.a.instanceOf(c.Map),visible:C.a.bool};var we=Oe;class Se extends l.Component{constructor(e){super(e),this.handleDeleteModalClose=this.handleDeleteModalClose.bind(this),this.handleDelete=this.handleDelete.bind(this)}handleDeleteModalClose(){const{handleClose:e}=this.props;e()}handleDelete(){const{form:e,handleSubmit:t}=this.props;t(e.get("id"))}render(){const{visible:e}=this.props,t=n.a.createElement("div",null,n.a.createElement("div",{className:"alert alert-danger"},"Czy na pewno chcesz usunąć ten voucher? Tej akcji nie można cofnąć."),n.a.createElement("div",{className:"modal-footer"},n.a.createElement("button",{type:"button",className:"btn btn-secondary",onClick:this.handleDeleteModalClose},"Zamknij"),n.a.createElement("button",{type:"button",className:"btn btn-primary",onClick:this.handleDelete},"Usuń")));return n.a.createElement(re,{title:"Usuń Voucher",handleClose:this.handleDeleteModalClose,open:e,content:t,className:"middle-modal top-modal alert-modal"})}}Se.propTypes={form:C.a.object,visible:C.a.bool};var Me=Se;const Te={[R]:"success",[L]:"warning",[A]:"danger",[V]:"info"};class xe extends l.Component{constructor(e){super(e),this.getColumns=this.getColumns.bind(this),this.showModal=this.showModal.bind(this),this.closeModal=this.closeModal.bind(this),this.handleFormChange=this.handleFormChange.bind(this),this.handleSubmit=this.handleSubmit.bind(this),this.handleDeleteSubmit=this.handleDeleteSubmit.bind(this),this.showDeleteModal=this.showDeleteModal.bind(this),this.closeDeleteModal=this.closeDeleteModal.bind(this),this.state={modalVisible:!1,modalDeleteVisible:!1,form:Object(c.Map)()},F.a.locale("pl")}showModal(e){this.setState({modalVisible:!0,form:Object(c.Map)(f.objectToSnakeCase(e))})}closeModal(){this.setState({modalVisible:!1,form:Object(c.Map)()})}showDeleteModal(e){this.setState({modalDeleteVisible:!0,form:Object(c.Map)(f.objectToSnakeCase(e))})}closeDeleteModal(){this.setState({modalDeleteVisible:!1,form:Object(c.Map)()})}handleFormChange(e){const{name:t,value:a}=e,{form:s}=this.state;this.setState({form:s.set(t,a)})}handleSubmit(){const{form:e}=this.state,{handleEdit:t}=this.props;var a,s;(a=e.get("id"),s=e.get("voucher_status"),i.a.patch("/api/company/vouchers/".concat(a),{voucher_status:s}).then(e=>e.data.data).catch(e=>{console.error(e)})).then(a=>{t(e.get("id"),a),this.closeModal()})}handleDeleteSubmit(){const{form:e}=this.state,{handleDelete:t}=this.props;var a;(a=e.get("id"),i.a.delete("/api/company/vouchers/".concat(a)).then(e=>e.data.data).catch(e=>{console.error(e)})).then(a=>{t(e.get("id"),a),this.closeDeleteModal()})}getColumns(){return[{title:"Akcje",render:e=>n.a.createElement("div",{className:"actions ".concat(E.a.voucherTableActions)},n.a.createElement("button",{onClick:()=>this.showModal(e),type:"button",className:"btn btn-outline-brand btn-icon"},n.a.createElement("i",{className:"fa fa-edit"})),n.a.createElement("button",{onClick:()=>this.showDeleteModal(e),type:"button",className:"btn btn-outline-brand btn-icon"},n.a.createElement("i",{className:"fa fa-trash"})))},{title:"Kod",field:"code"},{title:"Status",render:e=>{const{voucherStatus:t}=e,a=P[t];return n.a.createElement("div",{className:"voucher-status"},n.a.createElement("span",{className:"btn btn-elevate btn-".concat(Te[t]," ").concat(E.a.voucherStatus)},a))}},{title:"Użytkownik",render:e=>{const{voucherReceiverKind:t,voucherReceiverName:a,voucherReceiverEmail:s,user:o}=e;if(0===t)return n.a.createElement("p",null,a,s&&" (".concat(s,")"));const{firstName:l,lastName:m}=o||{};return n.a.createElement("p",null,l," ",m)}},{title:"Utworzony",field:"createdAt",render:e=>F()(e.createdAt).format("MMMM Do YYYY, hh:mm")},{title:"Zaktulizowany",field:"updatedAt",render:e=>F()(e.createdAt).format("MMMM Do YYYY, hh:mm")}]}render(){const{vouchers:e}=this.props,{form:t,modalVisible:a,modalDeleteVisible:s}=this.state;return n.a.createElement(ae,{title:"Vouchery"},n.a.createElement(we,{visible:a,handleClose:this.closeModal,handleFormChange:this.handleFormChange,handleSubmit:this.handleSubmit,form:t}),n.a.createElement(Me,{visible:s,handleClose:this.closeDeleteModal,handleSubmit:this.handleDeleteSubmit,form:t}),n.a.createElement("div",{className:"table-wrapper"},n.a.createElement("div",{className:"table-content"},n.a.createElement(ee,{columns:this.getColumns(),exportButton:!0,data:e.toArray(),options:{pageSize:5}}))))}}xe.propTypes={handleDelete:C.a.func,handleEdit:C.a.func,vouchers:C.a.instanceOf(c.List)};var ze=xe,De=a("./node_modules/lodash/sortBy.js"),Fe=a.n(De),Le=(a("./node_modules/core-js/modules/web.dom-collections.iterator.js"),a("./node_modules/recharts/es6/index.js"));class Re extends l.Component{render(){const e=this.props.entries;return 0===e.length?null:n.a.createElement(Le.e,{width:"100%",aspect:2},n.a.createElement(Le.b,{data:e,margin:{top:5,right:30,left:20,bottom:5}},n.a.createElement(Le.g,{dataKey:"created_at"}),n.a.createElement(Le.h,{interval:0,allowDecimals:!1}),n.a.createElement(Le.c,{strokeDasharray:"3 3"}),n.a.createElement(Le.f,null),n.a.createElement(Le.d,null),n.a.createElement(Le.a,{dataKey:"total",fill:"#34bfa3"})))}}Re.propTypes={entries:C.a.array};var Ae=Re;class Ve extends l.Component{constructor(e){super(e),this.selectVouchersFilter=this.selectVouchersFilter.bind(this),this.state={activeVouchersFilter:{value:"LAST_12_MONTHS"}}}selectVouchersFilter(e){this.setState({activeVouchersFilter:e})}render(){const{activeVouchersFilter:e}=this.state,{chartEntries:t,dateField:a="created_at",title:s="Statystyki"}=this.props,o=Y,l=e||o[0];let{filteredEntries:m,start:r,end:c}=((e,t,a={})=>{const{dateField:s="date"}=a;let o,l,n=e;const m="YYYY-MM-DD";if("year"===t.kind)o=F()().endOf("year"),l=F()().startOf("year"),n=e.filter(e=>e.get(s).format("YYYY")===t.value);else switch(t.value){case"ALL_TIME":l=F()().format(m),n=e.filter(e=>e.get(s)<=l);break;case"THIS_YEAR":n=e.filter(e=>F()(e.get(s)).format("YYYY")===F()().format("YYYY"));break;case"LAST_12_MONTHS":l=F()().format(m),o=F()().subtract(12,"months").format(m),n=e.filter(e=>e.get(s)<=l&&e.get(s)>=o);break;case"LAST_3_MONTHS":l=F()().format(m),o=F()().subtract(3,"months").format(m),n=e.filter(e=>e.get(s)<=l&&e.get(s)>=o);break;case"CURRENT_MONTH":l=F()().format(m),o=F()().startOf("month").format(m),n=e.filter(e=>e.get(s)<=l&&e.get(s)>=o);break;case"LAST_WEEK":l=F()().startOf("week").subtract(1,"minute").format(m),o=F()().startOf("week").subtract(1,"week").format(m),n=e.filter(e=>e.get(s)<=l&&e.get(s)>=o);break;case"CURRENT_WEEK":l=F()().format(m),o=F()().startOf("week").format(m),n=e.filter(e=>e.get(s)<=l&&e.get(s)>=o)}return{filteredEntries:n,start:o,end:l}})(t,l,{dateField:a}),d=Fe()(m.map(e=>e.toObject()).toArray(),"name","asc");if(d.length>0&&r&&c){let e=[],t={};d.forEach(e=>{const s=e[a];t[s]=e});let s=F()(r),o=F()(c);for(let l=s;l<o;l=l.add(1,"day")){let s=l.format("YYYY-MM-DD"),o=t[s];o||(o={total:0},o[a]=s),e.push(o)}d=e}const i=n.a.createElement("ul",{className:"nav nav-tabs nav-tabs-line nav-tabs-bold nav-tabs-line-brand"},o.map(t=>n.a.createElement("li",{className:"nav-item filter ".concat(t.value===e.value?" active":""),key:t.value,onClick:()=>this.selectVouchersFilter(t)},n.a.createElement("a",{className:"nav-link"},t.name))));return n.a.createElement(ae,{title:s,actions:i},d.length<=0&&n.a.createElement("p",null,"No data for this period"),n.a.createElement(Ae,{entries:d}))}}Ve.propTypes={chartEntries:C.a.instanceOf(c.List),dateField:C.a.string,title:C.a.string};var Pe=Ve;class Ye extends l.Component{constructor(e){super(e),this.state={vouchers:Object(c.List)(),finances:Object(c.Map)({voucher_statistics_day:Object(c.List)(),voucher_statistics_kind:Object(c.List)(),statistics:Object(c.Map)({this_month_vouchers:0,this_month_incomes:0,this_month_orders:0,total_vouchers:0,total_incomes:0,total_orders:0})})},this.handleEdit=this.handleEdit.bind(this),this.handleDelete=this.handleDelete.bind(this)}componentDidMount(){i.a.get("/api/company/vouchers").then(e=>e.data.data).catch(e=>{console.error(e)}).then(e=>{this.setState({vouchers:Object(c.List)(e.map(e=>f.objectToCamelCase(e)))})}),i.a.get("/api/company/finances/vouchers").then(e=>e.data.data).catch(e=>{console.error(e)}).then(e=>{const{finances:t}=this.state;this.setState({finances:t.set("voucher_statistics_day",Object(c.List)(e.voucher_statistics_day.map(e=>Object(c.Map)(e)))).set("voucher_statistics_kind",Object(c.List)(e.voucher_statistics_kind.map(e=>Object(c.Map)(e)))).set("statistics",Object(c.Map)(e.statistics))})})}handleEdit(e,t){const{vouchers:a}=this.state;this.setState({vouchers:a.map(a=>a.id===e?f.objectToCamelCase(t):a)})}handleDelete(e){const{vouchers:t}=this.state;this.setState({vouchers:t.filter(t=>t.id!==e)})}render(){const{finances:e,vouchers:t}=this.state,a=e.get("statistics");return n.a.createElement(l.Fragment,null,n.a.createElement(o.a,null,n.a.createElement("title",null,"Dashboard")),n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"col-xl-12"},n.a.createElement("div",{className:"kt-portlet__body  kt-portlet__body--fit"},n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"col-xl-6"},n.a.createElement(Pe,{chartEntries:e.get("voucher_statistics_day")})),n.a.createElement("div",{className:"col-xl-6"},n.a.createElement("div",{className:"kt-portlet"},n.a.createElement("div",{className:"kt-portlet__body kt-portlet__body--fit"},n.a.createElement("div",{className:"row row-no-padding row-col-separator-xl"},n.a.createElement("div",{className:"col-md-12 col-lg-12 col-xl-6"},n.a.createElement("div",{className:"kt-widget1"},n.a.createElement("div",{className:"kt-widget1__item"},n.a.createElement("div",{className:"kt-widget1__info"},n.a.createElement("h3",{className:"kt-widget1__title"},"Przychody"),n.a.createElement("span",{className:"kt-widget1__desc"},"Za ten miesiąc")),n.a.createElement("span",{className:"kt-widget1__number kt-font-brand"},a.get("this_month_incomes"))),n.a.createElement("div",{className:"kt-widget1__item"},n.a.createElement("div",{className:"kt-widget1__info"},n.a.createElement("h3",{className:"kt-widget1__title"},"Zamówienia"),n.a.createElement("span",{className:"kt-widget1__desc"},"Za ten miesiąc")),n.a.createElement("span",{className:"kt-widget1__number kt-font-danger"},a.get("this_month_orders"))),n.a.createElement("div",{className:"kt-widget1__item"},n.a.createElement("div",{className:"kt-widget1__info"},n.a.createElement("h3",{className:"kt-widget1__title"},"Vouchery"),n.a.createElement("span",{className:"kt-widget1__desc"},"Za ten miesiąc")),n.a.createElement("span",{className:"kt-widget1__number kt-font-success"},a.get("this_month_vouchers"))))),n.a.createElement("div",{className:"col-md-12 col-lg-12 col-xl-6"},n.a.createElement("div",{className:"kt-widget1"},n.a.createElement("div",{className:"kt-widget1__item"},n.a.createElement("div",{className:"kt-widget1__info"},n.a.createElement("h3",{className:"kt-widget1__title"},"Przychody"),n.a.createElement("span",{className:"kt-widget1__desc"},"Razem")),n.a.createElement("span",{className:"kt-widget1__number kt-font-brand"},a.get("total_incomes"))),n.a.createElement("div",{className:"kt-widget1__item"},n.a.createElement("div",{className:"kt-widget1__info"},n.a.createElement("h3",{className:"kt-widget1__title"},"Zamówienia"),n.a.createElement("span",{className:"kt-widget1__desc"},"Razem")),n.a.createElement("span",{className:"kt-widget1__number kt-font-danger"},a.get("total_orders"))),n.a.createElement("div",{className:"kt-widget1__item"},n.a.createElement("div",{className:"kt-widget1__info"},n.a.createElement("h3",{className:"kt-widget1__title"},"Vouchery"),n.a.createElement("span",{className:"kt-widget1__desc"},"Razem")),n.a.createElement("span",{className:"kt-widget1__number kt-font-success"},a.get("total_vouchers"))))))))))))),n.a.createElement(ze,{vouchers:t,handleEdit:this.handleEdit,handleDelete:this.handleDelete}))}}t.default=Object(m.b)(e=>({user:Object(r.a)(e)}))(Ye)}}]);