(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{"./node_modules/core-js/modules/es.string.match.js":function(e,a,t){"use strict";var s=t("./node_modules/core-js/internals/fix-regexp-well-known-symbol-logic.js"),r=t("./node_modules/core-js/internals/an-object.js"),n=t("./node_modules/core-js/internals/to-length.js"),o=t("./node_modules/core-js/internals/require-object-coercible.js"),c=t("./node_modules/core-js/internals/advance-string-index.js"),l=t("./node_modules/core-js/internals/regexp-exec-abstract.js");s("match",1,(function(e,a,t){return[function(a){var t=o(this),s=null==a?void 0:a[e];return void 0!==s?s.call(a,t):new RegExp(a)[e](String(t))},function(e){var s=t(a,e,this);if(s.done)return s.value;var o=r(e),i=String(this);if(!o.global)return l(o,i);var u=o.unicode;o.lastIndex=0;for(var m,d=[],p=0;null!==(m=l(o,i));){var f=String(m[0]);d[p]=f,""===f&&(o.lastIndex=c(i,n(o.lastIndex),u)),p++}return 0===p?null:d}]}))},"./resources/assets/js/constants/regexes.js":function(e,a,t){"use strict";t.d(a,"a",(function(){return s}));const s=/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/},"./resources/assets/js/pages/Settings/SettingsRoutes.jsx":function(e,a,t){"use strict";t.r(a),t.d(a,"SettingsRoutes",(function(){return D}));t("./node_modules/core-js/modules/es.string.match.js");var s=t("./node_modules/react/index.js"),r=t.n(s),n=t("./node_modules/prop-types/index.js"),o=t.n(n),c=t("./node_modules/react-router-dom/es/Route.js"),l=t("./node_modules/react-router-dom/es/Link.js"),i=Object.assign||function(e){for(var a=1;a<arguments.length;a++){var t=arguments[a];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};var m=function(e){var a=e.to,t=e.exact,s=e.strict,n=e.location,o=e.activeClassName,m=e.className,d=e.activeStyle,p=e.style,f=e.isActive,b=e["aria-current"],g=function(e,a){var t={};for(var s in e)a.indexOf(s)>=0||Object.prototype.hasOwnProperty.call(e,s)&&(t[s]=e[s]);return t}(e,["to","exact","strict","location","activeClassName","className","activeStyle","style","isActive","aria-current"]),w="object"===(void 0===a?"undefined":u(a))?a.pathname:a,j=w&&w.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1");return r.a.createElement(c.a,{path:j,exact:t,strict:s,location:n,children:function(e){var t=e.location,s=e.match,n=!!(f?f(s,t):s);return r.a.createElement(l.a,i({to:a,className:n?[m,o].filter((function(e){return e})).join(" "):m,style:n?i({},p,d):p,"aria-current":n&&b||null},g))}})};m.propTypes={to:l.a.propTypes.to,exact:o.a.bool,strict:o.a.bool,location:o.a.object,activeClassName:o.a.string,className:o.a.string,activeStyle:o.a.object,style:o.a.object,isActive:o.a.func,"aria-current":o.a.oneOf(["page","step","location","date","time","true"])},m.defaultProps={activeClassName:"active","aria-current":"page"};var d=m,p=t("./node_modules/react-router-dom/es/Switch.js"),f=t("./resources/assets/js/components/index.js"),b=t("./resources/assets/js/constants/styles.js"),g=(t("./node_modules/core-js/modules/es.promise.js"),t("./node_modules/react-redux/es/index.js")),w=t("./resources/assets/js/store/actions.js"),j=t("./node_modules/axios/index.js"),y=t.n(j);const v=(e,a)=>async t=>{t({type:w.b.REQUEST,actionType:e});try{const s=await a();return t({type:w.b.SUCCESS,actionType:e}),s}catch(e){throw t({type:w.b.FAILED,error:e}),e}};var h=t("./resources/assets/js/store/action-creators/flashMessages/index.js");var E=t("./node_modules/formik/dist/formik.esm.js"),_=t("./resources/assets/js/constants/regexes.js");const x=(e={})=>{let a={};return e.first_name||(a.first_name="This field is required"),e.last_name||(a.last_name="This field is required"),e.email?_.a.test(e.email)||(a.email="Invalid email address"):a.email="This field is required",a},S=Object(g.b)(e=>{const{session:{currentUser:a}}=e;return{user:e.entities.users[a]}},null)(({user:e,onSubmit:a,className:t="",avatarUploadHandler:s})=>r.a.createElement(E.c,{validate:x,onSubmit:a,initialValues:e,validateOnChange:!1},()=>r.a.createElement(E.b,{className:t},r.a.createElement("div",{className:"flex items-center my-4"},r.a.createElement(E.a,{name:"avatar",component:f.l,uploadHandler:s,className:"mr-10"}),r.a.createElement("div",{className:"flex-grow"},r.a.createElement(E.a,{name:"first_name",component:f.o,labelText:"First Name"}),r.a.createElement(E.a,{name:"last_name",component:f.o,labelText:"Last Name"}),r.a.createElement(E.a,{name:"email",component:f.o,labelText:"Email"}))),r.a.createElement("div",{className:"flex border-grey-light"},r.a.createElement(f.m,{type:"submit",className:"ml-auto"},"Save User Details"))))),N=(e={})=>{let a={};return["old_password","new_password","new_password_confirmation"].forEach(t=>{e[t]||(a[t]="This field is required")}),e.new_password&&e.new_password_confirmation!==e.new_password&&(a.new_password_confirmation="This password does not match the new password you entered"),a},O=({onSubmit:e})=>r.a.createElement(E.c,{validate:N,onSubmit:e,initialValues:{old_password:"",new_password:"",new_password_confirmation:""}},e=>r.a.createElement(E.b,null,r.a.createElement(E.a,{className:"mb-2",name:"old_password",component:f.j,labelText:"Enter your old password"}),r.a.createElement("div",{className:"flex items-start mb-4"},r.a.createElement(E.a,{name:"new_password",className:"flex-grow",labelText:"New Password",component:f.j}),r.a.createElement(E.a,{className:"flex-grow pl-4",component:f.j,name:"new_password_confirmation",labelText:"Repeat your new password"})),r.a.createElement("div",{className:"flex border-grey-light"},r.a.createElement(f.m,{type:"submit",className:"ml-auto"},"Change Password"))));function P(e,a){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);a&&(s=s.filter((function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable}))),t.push.apply(t,s)}return t}function T(e){for(var a=1;a<arguments.length;a++){var t=null!=arguments[a]?arguments[a]:{};a%2?P(Object(t),!0).forEach((function(a){U(e,a,t[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):P(Object(t)).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(t,a))}))}return e}function U(e,a,t){return a in e?Object.defineProperty(e,a,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[a]=t,e}const A=Object(g.b)(e=>({currentUser:e.entities.users[e.session.currentUser]}),e=>({saveUserSettings:async(a,{setErrors:t})=>{const s=await e((e=>async a=>{const{slug:t}=e;return await a(v("save-user-settings",()=>y.a.put("/api/users/".concat(t),e)))})(a));400===s.status&&t((s.data.data,{})),e(Object(h.a)("success","Successfully saved user info",4e3)),e({type:w.d.SET_CURRENT_USER_INFO,users:s.data.data})},uploadUserAvatar:(a,t)=>e(((e,a)=>async t=>{const s=await t(v("set-user-avatar",()=>y.a.post("/api/avatars",e)));t({type:w.d.SET_AVATAR,userSlug:a,avatar:s.data.fileUrl})})(a,t)),changePassword:async(a,{setErrors:t})=>{try{await e((e=>async a=>{const{slug:t}=e;return await a(v("change-user-password",()=>y.a.put("/api/users/".concat(t,"/update-password"),e)))})(a)),e(Object(h.a)("success","Your password was successfully changed",4e3))}catch(e){422===e.response.status&&t((e.response.data.data,{})),400===e.response.status&&t({old_password:"The current password was incorrect"})}}}),(e,a,t)=>T({},e,{},a,{},t,{avatarUploadHandler:t=>a.uploadUserAvatar(t,e.currentUser.slug),handleChangePassword:t=>{const s=T({slug:e.currentUser.slug},t);return a.changePassword(s)}}))(({saveUserSettings:e,avatarUploadHandler:a,handleChangePassword:t})=>r.a.createElement(s.Fragment,null,r.a.createElement("h3",{className:"text-grey-darkest font-normal"},"Your Details"),r.a.createElement(S,{className:"mb-4",onSubmit:e,avatarUploadHandler:a}),r.a.createElement("h3",{className:"text-grey-darkest font-normal"},"Change Your Password"),r.a.createElement(O,{onSubmit:t}))),C=()=>r.a.createElement("div",null,"Application Settings Placeholder"),k=()=>r.a.createElement("div",null,"Billing Settings Placeholder"),R=({to:e,className:a="",children:t})=>r.a.createElement(d,{to:e,activeClassName:"bg-blue-lightest",className:"block border-b border-grey-light p-4 ".concat(b.a," ").concat(a)},t),D=({match:{url:e}})=>r.a.createElement(s.Fragment,null,r.a.createElement("h2",{className:"mb-4"},"Settings"),r.a.createElement("div",{className:"flex items-start"},r.a.createElement(f.d,{className:"w-64"},r.a.createElement(R,{to:"".concat(e,"/user")},"Account"),r.a.createElement(R,{to:"".concat(e,"/app")},"Application"),r.a.createElement(R,{to:"".concat(e,"/billing")},"Billing")),r.a.createElement(f.d,{className:"flex-grow ml-4"},r.a.createElement(f.e,null,r.a.createElement(p.a,null,r.a.createElement(c.a,{exact:!0,path:"".concat(e,"/user"),component:A}),r.a.createElement(c.a,{exact:!0,path:"".concat(e,"/app"),component:C}),r.a.createElement(c.a,{exact:!0,path:"".concat(e,"/billing"),component:k}))))));a.default=D}}]);